{# templates/payment/index.html.twig #}

<h1>Paiement</h1>

<form id="payment-form" action="{{ url }}">
  <div id="card-element">
    <!-- Un élément Stripe sera inséré ici -->
  </div>

  <button id="submit">Payer</button>
</form>

{# <script src="https://js.stripe.com/v3/"></script>
<script>
  const stripe = Stripe('{{ publicKey }}')
  const elements = stripe.elements()
  
  const card = elements.create('card')
  card.mount('#card-element')
  
  const form = document.getElementById('payment-form')
  form.addEventListener('submit', async (event) => {
    event.preventDefault()
  
    const { paymentIntent, error } = await stripe.confirmCardPayment('{{ clientSecret }}', {
      payment_method: {
        card: card
      }
    })
  
    if (error) {
      console.error(error)
      alert('Erreur lors du paiement.')
    } else {
      alert('Paiement réussi !')
    }
  })
</script> #}
